<app-titulo [titulo]="'Dashboard'" [subtitulo]="'Menu Principal'" [icone]="'fas fas fa-chart-bar'"></app-titulo>
<div class="card p-3 shadow-sm rounded">

  <div class="d-flex mb-2">
    <div class="flex-fill pr-3">
      <select [(ngModel)]="opcao" class="form-control">
        <option [ngValue]="null">Todos</option>
        <option [ngValue]="0">Cotações</option>
        <option [ngValue]="1">Solicitações</option>
        <option [ngValue]="2">Pedidos</option>
      </select>
    </div>


  <div>
    <a class="d-flex btn btn-outline-primary" routerLink="/solicitacao/detalhe">
      <i class="fas fa-plus-circle my-1"></i>
      <b class="ml-1 d-none d-md-block">Nova Solicitação</b>
    </a>
  </div>
</div>


  <table class="table table-striped table-hover">
    <thead class="bg-logo">
      <tr>
        <th class="d-none d-md-table-cell">
        </th>
        <th class="d-none d-md-table-cell text-center">Código</th>
        <th class="text-center">Tipo</th>
        <th class="text-center">Status</th>
        <th class="text-center">Data</th>
        <th class="text-center">Opções</th>
      </tr>
    </thead>
    <tbody *ngIf="cotacoes && cotacoes.length && opcao===0 || opcao===null">
      <tr *ngFor="let cotacao of cotacoes" (dblclick)="DetalharEvento(cotacao.id)">
        <td class="d-none d-md-table-cell text-center">{{cotacao.id}}</td>
        <td class="text-center">{{cotacao.statusCotacao}}</td>
        <td class="text-center">{{cotacao.prazoCotacao| DateTimeFormatter}}</td>
        <td class="text-center">
            <i class="fas fa-times fa-2x" (click)="openModal(template)" style="color: red; cursor: pointer;"></i>
        </td>
      </tr>
    </tbody>
    <tfoot *ngIf="!cotacoes || cotacoes.length == 0 && opcao===0">
      <tr>
        <td colspan="8" class="text-center">
          <h4 >Não há cotações cadastradas</h4>
        </td>
      </tr>
    </tfoot>
    <tbody *ngIf="solicitacoes && solicitacoes.length && opcao===1 || opcao===null">
      <tr *ngFor="let solicitao of solicitacoes" (dblclick)="DetalharEvento(solicitao.id)">
        <td class="d-none d-md-table-cell text-center">{{solicitao.id}}</td>
        <td class="text-center">{{solicitao.statusAprovacao}}</td>
        <td class="text-center">{{ solicitao.dataSolicitacao| DateTimeFormatter}}</td>
        <td class="text-center">
            <i class="fas fa-times fa-2x" (click)="openModal(template)" style="color: red; cursor: pointer;"></i>
        </td>
      </tr>
    </tbody>
    <tfoot *ngIf="!solicitacoes || solicitacoes.length == 0 && opcao===1">
      <tr>
        <td colspan="8" class="text-center">
          <h4 >Não há solicitações cadastradas</h4>
        </td>
      </tr>
    </tfoot>
    <tbody *ngIf="pedidos && pedidos.length && opcao===2 || opcao===null">
      <tr *ngFor="let pedido of pedidos" (dblclick)="DetalharEvento(pedido.Id)">
        <td class="d-none d-md-table-cell text-center">{{pedido.Id}}</td>
        <td class="text-center">{{pedido.StatusAprov}}</td>
        <td class="text-center">{{ pedido.DataEmissao| DateTimeFormatter}}</td>
        <td class="text-center">
            <i class="fas fa-times fa-2x" (click)="openModal(template)" style="color: red; cursor: pointer;"></i>
        </td>
      </tr>
    </tbody>
    <tfoot *ngIf="!pedidos || pedidos.length == 0 && opcao===2">
      <tr>
        <td colspan="8" class="text-center">
          <h4 >Não há pedidos cadastrados</h4>
        </td>
      </tr>
    </tfoot>
    <tfoot *ngIf="!pedidos || pedidos.length == 0 && !solicitacoes || solicitacoes.length == 0 && !cotacoes || cotacoes.length == 0 && opcao===null">
      <tr>
        <td colspan="8" class="text-center">
          <h4 >Não há nada cadastrado</h4>
        </td>
      </tr>
    </tfoot>
  </table>
</div>

<ng-template #template>
  <div class="modal-body text-center">
    <p>Tem certeza que deseja excluir esse Evento?</p>
    <button type="button" class="btn btn-default" (click)="confirm()" >Sim</button>
    <button type="button" class="btn btn-primary" (click)="decline()" >Não</button>
  </div>
</ng-template>
